(this.webpackJsonpreact1=this.webpackJsonpreact1||[]).push([[0],{46:function(e,t,s){},47:function(e,t,s){},48:function(e,t,s){},49:function(e,t,s){},50:function(e,t,s){},51:function(e,t,s){},52:function(e,t,s){},53:function(e,t,s){},54:function(e,t,s){},55:function(e,t,s){"use strict";s.r(t);var r=s(1),n=s(0),c=s.n(n),a=s(21),l=s.n(a),o=s(5),i=s(19),j=s(2),u=(0,s(0).createContext)();var d=function(e){var t=e.to,s=e.children,n=e.handleClick;return Object(r.jsx)("li",{className:"nav__link",onClick:n,children:Object(r.jsx)(i.b,{to:t,children:s})})};var b=function(){var e=Object(n.useContext)(u),t=Object(j.g)();return Object(r.jsx)("header",{className:"header",children:Object(r.jsxs)("ul",{className:"nav",children:[Object(r.jsxs)(d,{to:"/home",children:[Object(r.jsx)("i",{className:"fas fa-home"})," Home"]}),Object(r.jsxs)(d,{to:"/profile",children:[Object(r.jsx)("i",{className:"fas fa-user"})," Profile"]}),Object(r.jsxs)(d,{to:"/users",children:[Object(r.jsx)("i",{className:"fas fa-users"})," Users"]}),Object(r.jsxs)(d,{to:"/register",children:[Object(r.jsx)("i",{className:"fas fa-user-plus"})," Register"]}),Object(r.jsxs)(d,{to:"/add",children:[Object(r.jsx)("i",{className:"fas fa-plus-square"})," Add"]}),e.loggedin?Object(r.jsxs)(d,{handleClick:function(){e.logout(),t.push("/login")},children:[Object(r.jsx)("i",{className:"fas fa-sign-out-alt"})," Logout"]}):Object(r.jsxs)(d,{to:"/login",children:[Object(r.jsx)("i",{className:"fas fa-sign-in-alt"})," Login"]})]})})},m=s(15),O=(0,s(0).createContext)(),h=s(7),f=(0,s(18).createSlice)({name:"posts",initialState:[{title:"Title 1",body:"My name is Daler",likes:10,comments:[{author:"Daler",body:"Good good good!"}]},{title:"Title 2",body:"My name is Daler",likes:23,comments:[{author:"Daler",body:"Not Bad!"},{author:"Aziz",body:"Shit!"}]}],reducers:{addPost:function(e,t){var s=t.payload;e.push(s)},addComment:function(e,t){var s=t.payload;console.log(s);for(var r=s.title,n=s.comment,c=0;c<e.length;c++)e[c].title===r&&e[c].comments.push(n)},like:function(e,t){var s=t.payload;console.log(s);for(var r=s.title,n=0;n<e.length;n++)e[n].title===r&&e[n].likes++}}}),x=f.actions,g=x.addPost,p=x.addComment,v=x.like,_=f.reducer,N=s(18),y=Object(N.createSlice)({name:"users",initialState:[{username:"Daler",password:"111",posts:["Title 2"],followings:[]},{username:"Aziz",password:"222",posts:[],followings:[]}],reducers:{addUser:function(e,t){var s=t.payload;e.push(s)},insertPost:function(e,t){var s=t.payload;console.log(s);for(var r=s.user,n=s.title,c=0;c<e.length;c++)e[c].username===r&&e[c].posts.push(n)},follow:function(e,t){var s=t.payload;console.log(s);for(var r=s.from,n=s.to,c=0;c<e.length;c++)e[c].username===r&&e[c].followings.push(n)},unfollow:function(e,t){var s=t.payload;console.log(s);for(var r=s.from,n=s.to,c=0;c<e.length;c++)if(e[c].username===r){var a=e[c].followings.filter((function(e){return e!==n}));e[c].followings=a}}}}),C=y.actions,w=C.addUser,k=C.follow,U=C.unfollow,S=C.insertPost,P=y.reducer;var A=function(){var e=Object(o.b)(),t=Object(n.useContext)(u),s=Object(n.useContext)(O),c=Object(o.c)((function(e){return e.posts})),a={initialValues:{title:"",body:""},validate:function(e){var t=e.title,s=e.body,r={};""===t&&(r.title="No title!"),""===s&&(r.body="No body!")},onSubmit:function(r){var n=r.title,a=r.body;if(n&&a){for(var l={title:n,body:a,likes:[],comments:[]},o=0;o<c.length;o++)if(c[o].title===n)return s.setCurrentClass("animate-alert-down"),void s.setError("Post alerady exists");e(g(l)),e(S({user:t.currentUser,title:n}))}else s.setCurrentClass("animate-alert-down"),s.setError("Empty field!")}};return Object(r.jsxs)(n.Fragment,{children:[Object(r.jsx)("h2",{style:{textAlign:"center",margin:"20px 0"},children:"Add Post"}),Object(r.jsx)(h.c,Object(m.a)(Object(m.a)({},a),{},{children:Object(r.jsxs)(h.b,{className:"add",children:[Object(r.jsx)(h.a,{name:"title",placeholder:"Title",className:"add__field add__title"}),Object(r.jsx)("br",{}),Object(r.jsx)(h.a,{name:"body",placeholder:"Body",className:"add__field add__body"}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{type:"submit",className:"add__submit",children:"Create"})]})}))]})},E=s(27),F=s(14);var D=function(){var e=Object(n.useState)(""),t=Object(F.a)(e,2),s=t[0],c=t[1],a=Object(n.useState)(!1),l=Object(F.a)(a,2),i=l[0],j=l[1],d=Object(o.b)(),b=Object(n.useContext)(u),m=Object(o.c)((function(e){return e.posts})),O=Object(o.c)((function(e){return e.users}));if(!b.loggedin)return Object(r.jsx)("h1",{style:{textAlign:"center",marginTop:"50px"},children:"Not logged in!"});var h,f=[],x=Object(E.a)(O);try{for(x.s();!(h=x.n()).done;){var g=h.value;b.currentUser===g.username&&(f=g.posts)}}catch(N){x.e(N)}finally{x.f()}var _=m.filter((function(e){return!!f.includes(e.title)})).map((function(e){return Object(r.jsxs)("div",{className:"posts__post",children:[Object(r.jsx)("h2",{className:"post__title",children:e.title}),Object(r.jsx)("div",{className:"post__body",children:e.body}),Object(r.jsx)("span",{className:"post__likes",onClick:function(){return t=e.title,void d(v({title:t}));var t},children:Object(r.jsx)("i",{className:"fas fa-heart"})})," ",e.likes,Object(r.jsx)("br",{}),Object(r.jsx)("ul",{className:"post__comments",children:i?e.comments.map((function(t){return Object(r.jsxs)("li",{className:"comments__comment",children:[Object(r.jsx)("h3",{className:"comment__author",children:t.author}),Object(r.jsx)("div",{className:"comment__body",children:t.body})]},e.comments.indexOf(t))})):null}),i?Object(r.jsxs)("form",{children:[Object(r.jsx)("input",{value:s,onChange:function(e){return c(e.target.value)},placeholder:"Comment"}),Object(r.jsx)("button",{className:"post__add-btn",onClick:function(t){return function(e,t){e.preventDefault();var r={author:b.currentUser,body:s};d(p({title:t,comment:r}))}(t,e.title)},children:"Add comment"})]}):null,i?Object(r.jsx)("div",{className:"post__close-comments-btn",onClick:function(){return j(!1)},children:"Close comments"}):Object(r.jsx)("div",{className:"post__open-comments-btn",onClick:function(){return j(!0)},children:"Open comments"})]},e.title)}));return Object(r.jsxs)("div",{className:"home",children:[Object(r.jsx)("h2",{className:"home__label",children:"Your posts"}),Object(r.jsx)("ul",{className:"posts",children:_})]})};var T=function(){var e=Object(n.useContext)(u),t=Object(n.useContext)(O),s=Object(j.g)(),c={initialValues:{username:"",password:""},validate:function(e){return{}},onSubmit:function(r){r.username&&r.password?e.login(r.username,r.password)?s.push("/profile"):alert("no such user"):(t.setError("Emply field!"),t.setCurrentClass("animate-alert-down"))}};return Object(r.jsxs)(n.Fragment,{children:[Object(r.jsx)("h2",{style:{margin:"20px 0",textAlign:"center"},children:"Login Page"}),Object(r.jsx)(h.c,Object(m.a)(Object(m.a)({},c),{},{children:Object(r.jsxs)(h.b,{className:"login",children:[Object(r.jsx)(h.a,{name:"username",placeholder:"Username",className:"login__field"}),Object(r.jsx)("br",{}),Object(r.jsx)(h.a,{name:"password",placeholder:"Password",className:"login__field"}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{type:"submit",className:"login__submit",children:"Login"})]})}))]})};var z=function(){var e,t=Object(n.useContext)(u),s=Object(o.c)((function(e){return e.users}));if(!t.loggedin)return Object(r.jsx)("h1",{style:{textAlign:"center",marginTop:"50px"},children:"Not logged in!"});for(var c=0;c<s.length;c++)s[c].username===t.currentUser&&(e=s[c]);for(var a=0,l=0;l<s.length;l++)s[l].followings.includes(e.username)&&a++;return console.log(e),Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{style:{textAlign:"center",margin:"20px 0"},children:"Profile"}),Object(r.jsx)("div",{className:"profile",children:Object(r.jsx)("table",{className:"profile__table",children:Object(r.jsxs)("tbody",{children:[Object(r.jsxs)("tr",{className:"profile__username",children:[Object(r.jsx)("td",{children:"Username"}),Object(r.jsx)("td",{children:e.username})]}),Object(r.jsxs)("tr",{className:"profile__followings",children:[Object(r.jsx)("td",{children:"Followings"}),Object(r.jsx)("td",{children:e.followings.length})]}),Object(r.jsxs)("tr",{className:"profile__followers",children:[Object(r.jsx)("td",{children:"Followers"}),Object(r.jsx)("td",{children:a})]})]})})})]})};var L=function(){var e=Object(o.b)(),t=Object(n.useContext)(O),s=Object(o.c)((function(e){return e.users})),c={initialValues:{username:"",password:""},onSubmit:function(r){var n=r.username,c=r.password;if(n&&c){for(var a={username:n,password:c,posts:[],followings:[]},l=0;l<s.length;l++)if(s[l].username===n)return t.setError("User already exists!"),void t.setCurrentClass("animate-alert-down");e(w(a))}else t.setError("Emply field!"),t.setCurrentClass("animate-alert-down")},validate:function(e){return{}}};return Object(r.jsxs)(n.Fragment,{children:[Object(r.jsx)("h2",{style:{textAlign:"center",margin:"20px 0"},children:"Register form"}),Object(r.jsx)(h.c,Object(m.a)(Object(m.a)({},c),{},{children:Object(r.jsxs)(h.b,{className:"register",children:[Object(r.jsx)(h.a,{name:"username",placeholder:"Username",className:"register__field register__username"}),Object(r.jsx)("br",{}),Object(r.jsx)(h.a,{name:"password",placeholder:"Password",className:"register__field register__password"}),Object(r.jsx)("br",{}),Object(r.jsx)("button",{type:"submit",className:"register__submit",children:"Create"})]})}))]})};var B=function(){var e=Object(o.b)(),t=Object(n.useContext)(u),s=Object(n.useContext)(O),c=Object(o.c)((function(e){return e.users})),a=function(){s.setError("Not logged in!"),s.setCurrentClass("animate-alert-down")},l=c.map((function(s){for(var n=[],l=0;l<c.length;l++)if(t.currentUser===c[l].username){n=c[l].followings;break}var o=Object(r.jsx)("button",{className:"user__follow",onClick:function(){return r=s.username,void(t.loggedin?e(k({to:r,from:t.currentUser})):a());var r},children:"Follow"}),i=Object(r.jsx)("button",{className:"user__unfollow",onClick:function(){return r=t.currentUser,n=s.username,void(t.loggedin?e(U({from:r,to:n})):a());var r,n},children:"Unfollow"});if(t.currentUser!==s.username)return Object(r.jsxs)("li",{className:"users__user",children:[Object(r.jsx)("h3",{children:s.username}),n.includes(s.username)?i:o]},s.username)}));return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)("h2",{style:{textAlign:"center",margin:"20px 0"},children:"Users"}),Object(r.jsx)("ul",{className:"users",children:l})]})};var M=function(){return Object(r.jsx)("main",{className:"main",children:Object(r.jsxs)(j.d,{children:[Object(r.jsx)(j.b,{path:"/",exact:!0,children:Object(r.jsx)(j.a,{to:{pathname:"/home"}})}),Object(r.jsx)(j.b,{path:"/home",children:Object(r.jsx)(D,{})}),Object(r.jsx)(j.b,{path:"/users",children:Object(r.jsx)(B,{})}),Object(r.jsx)(j.b,{path:"/login",children:Object(r.jsx)(T,{})}),Object(r.jsx)(j.b,{path:"/register",children:Object(r.jsx)(L,{})}),Object(r.jsx)(j.b,{path:"/add",children:Object(r.jsx)(A,{})}),Object(r.jsx)(j.b,{path:"/profile",children:Object(r.jsx)(z,{})})]})})};var V=function(e){var t=Object(n.useContext)(O);return Object(r.jsxs)("div",{className:"alert ".concat(t.currentClass),children:[Object(r.jsx)("h3",{children:t.error}),Object(r.jsx)("button",{className:"alert__close",onClick:function(){t.setCurrentClass("animate-alert-up")},children:"Close"})]})};var J=function(){var e=Object(n.useState)(!0),t=Object(F.a)(e,2),s=t[0],r=t[1],c=Object(n.useState)("Daler"),a=Object(F.a)(c,2),l=a[0],i=a[1],j=Object(o.c)((function(e){return e.users}));return{loggedin:s,currentUser:l,login:function(e,t){return function(e,t){var s,n=!1,c=Object(E.a)(j);try{for(c.s();!(s=c.n()).done;){var a=s.value;a.username===e&&a.password===t&&(n=!0)}}catch(l){c.e(l)}finally{c.f()}return n&&(i(e),r(!0)),n}(e,t)},logout:function(){return r(!1),void i(null)}}};var R=function(e){var t=Object(n.useState)(""),s=Object(F.a)(t,2),r=s[0],c=s[1],a=Object(n.useState)("Test Error"),l=Object(F.a)(a,2);return{currentClass:r,setCurrentClass:c,error:l[0],setError:l[1]}};s(46),s(47),s(48),s(49),s(50),s(51),s(52),s(53);var q=function(e){var t=J(),s=R();return Object(r.jsx)(O.Provider,{value:s,children:Object(r.jsx)(u.Provider,{value:t,children:Object(r.jsxs)(i.a,{children:[Object(r.jsx)(V,{}),Object(r.jsx)(b,{}),Object(r.jsx)(M,{})]})})})},G=Object(N.configureStore)({reducer:{users:P,posts:_}});s(54);l.a.render(Object(r.jsx)(c.a.StrictMode,{children:Object(r.jsx)(o.a,{store:G,children:Object(r.jsx)(q,{})})}),document.getElementById("root"))}},[[55,1,2]]]);
//# sourceMappingURL=main.9cf93883.chunk.js.map